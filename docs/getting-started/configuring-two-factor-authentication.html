
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>配置双因素身份验证 &#8212; npm-docs 6.9.1 文档</title>
    <link rel="stylesheet" href="../_static/sphinx13.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>

    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="恢复已启用2FA的帐户" href="recovering-your-2fa-enabled-account.html" />
    <link rel="prev" title="关于双因素身份验证" href="about-two-factor-authentication.html" />
<link rel="canonical" href="http://www.sphinx-doc.org/en/master/getting-started/configuring-two-factor-authentication.html" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet" type="text/css" />
 
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
  
</style>
<script type="text/javascript">
  // intelligent scrolling of the sidebar content
  $(window).scroll(function() {
    var sb = $('.sphinxsidebarwrapper');
    var win = $(window);
    var sbh = sb.height();
    var offset = $('.sphinxsidebar').position()['top'];
    var wintop = win.scrollTop();
    var winbot = wintop + win.innerHeight();
    var curtop = sb.position()['top'];
    var curbot = curtop + sbh;
    // does sidebar fit in window?
    if (sbh < win.innerHeight()) {
      // yes: easy case -- always keep at the top
      sb.css('top', $u.min([$u.max([0, wintop - offset - 10]), $(document).height() - sbh - 200]));
    } else {
      // no: only scroll if top/bottom edge of sidebar is at
      // top/bottom edge of window
      if (curtop > wintop && curbot > winbot) {
        sb.css('top', $u.max([wintop - offset - 10, 0]));
      } else if (curtop < wintop && curbot < winbot) {
        sb.css('top', $u.min([winbot - sbh - offset - 20, $(document).height() - sbh - 200]));
      }
    }
  });
</script> 
  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../index.html">主页</a></li>
    <li><a href="../about-npm.html">关于</a></li>
    <li><a href="index.html">入门</a></li>
    <li><a href="../packages-and-modules/index.html">包和模块</a></li>
    <li><a href="../cli/index.html">指令</a></li>
    <li><a href="../integrations/index.html">集成</a></li>
    <li><a href="../orgs/index.html">组织</a></li>
    <li><a href="../enterprise/index.html">企业版</a></li>
  </ul>
  <div>
    <a href="../index.html">
      <!-- <img src="../_static/wxaheader.png" alt="wxa" /> -->
      <svg viewBox="0 0 780 250">
        <path
          fill="#231F20"
          d="M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z M480,0v200h100V50h50v150h50V50h50v150h50V0H480z M0,200h100V50h50v150h50V0H0V200z"
        ></path>
      </svg>
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="recovering-your-2fa-enabled-account.html" title="恢复已启用2FA的帐户"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="about-two-factor-authentication.html" title="关于双因素身份验证"
             accesskey="P">上一页</a> |</li>
<li><a href="../index.html">主页</a>&#160;|</li>
<li><a href="../contents.html">文档</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">入门</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">配置双因素身份验证</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#configuring-2fa-on-the-web">Configuring 2FA on the web</a><ul>
<li><a class="reference internal" href="#enabling-2fa-on-the-web">Enabling 2FA on the web</a></li>
</ul>
</li>
<li><a class="reference internal" href="#removing-2fa-on-the-web">Removing 2FA on the web</a></li>
<li><a class="reference internal" href="#configuring-2fa-from-the-command-line">Configuring 2FA from the command line</a><ul>
<li><a class="reference internal" href="#enabling-2fa-from-the-command-line">Enabling 2FA from the command line</a></li>
<li><a class="reference internal" href="#sending-a-one-time-password-from-the-command-line">Sending a one-time password from the command line</a></li>
<li><a class="reference internal" href="#removing-2fa-from-the-command-line">Removing 2FA from the command line</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resolving-otp-errors">Resolving OTP errors</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="about-two-factor-authentication.html"
                        title="上一章">关于双因素身份验证</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="recovering-your-2fa-enabled-account.html"
                        title="下一章">恢复已启用2FA的帐户</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/getting-started/configuring-two-factor-authentication.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuring-two-factor-authentication">
<h1>配置双因素身份验证<a class="headerlink" href="#configuring-two-factor-authentication" title="永久链接至标题">¶</a></h1>
<p>您可以在npm用户帐户上启用双因素身份验证（2FA），以防止对您的帐户和软件包进行未经授权的访问。</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="永久链接至标题">¶</a></h2>
<p>Before you enable 2FA on your npm user account, you must:</p>
<ul class="simple">
<li><p>Update your npm client to version 5.5.1 or higher.</p></li>
<li><p>Install an authenticator application that can generate one-time passwords (such as Authy or Google Authenticator) on a mobile device or second computer that will always be available when you work in your npm account.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>npm does not accept SMS (text-to-phone) as a 2FA method.</p>
</div>
</div>
<div class="section" id="configuring-2fa-on-the-web">
<h2>Configuring 2FA on the web<a class="headerlink" href="#configuring-2fa-on-the-web" title="永久链接至标题">¶</a></h2>
<div class="section" id="enabling-2fa-on-the-web">
<h3>Enabling 2FA on the web<a class="headerlink" href="#enabling-2fa-on-the-web" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>Log in to npm with your user account. npm login dialog with username and password fields left blank</p></li>
<li><p>In the upper right corner of the page, click your profile picture, then click Profile Settings. npm avatar menu with selector over profile settings list item</p></li>
<li><p>On the profile settings page, under “Two Factor Authentication”, click Enable 2FA. enable 2FA button</p></li>
<li><p>On the 2FA settings page, select the mode you would like to enable. For more information, see “Two-factor authentication modes on npm”. authorization and publishing radio button selected</p></li>
<li><p>Click Submit. submit button</p></li>
<li><p>Open your authenticator application on your phone, and, on the two-step verification page, scan the QR code with your phone.</p></li>
<li><p>Enter the code generated by the app, then click Verify. verify button for 2fa authentication code form</p></li>
<li><p>On the recovery code page, copy the recovery codes to your computer or other safe location that is not your second factor device. We recommend using a password manager to save your recovery codes. If you are unable to access your phone, you will need to enter a recovery code when prompted for a one-time password.</p></li>
<li><p>Click Go back to settings. go back to settings button</p></li>
</ol>
</div>
</div>
<div class="section" id="removing-2fa-on-the-web">
<h2>Removing 2FA on the web<a class="headerlink" href="#removing-2fa-on-the-web" title="永久链接至标题">¶</a></h2>
<p>If you have 2FA enabled, you can remove it from your profile settings page.</p>
<ol class="arabic simple">
<li><p>Log in to npm with your user account. npm login dialog with username and password fields left blank</p></li>
<li><p>In the upper right corner of the page, click your profile picture, then click Profile Settings. npm avatar menu with selector over profile settings list item</p></li>
<li><p>On the profile settings page, under “Two Factor Authentication”, click Modify 2FA. modify 2fa button</p></li>
<li><p>On the 2FA settings page, under “What should we protect?”, select “Disable”. disable radio button selected</p></li>
<li><p>Click Submit. submit button</p></li>
</ol>
</div>
<div class="section" id="configuring-2fa-from-the-command-line">
<h2>Configuring 2FA from the command line<a class="headerlink" href="#configuring-2fa-from-the-command-line" title="永久链接至标题">¶</a></h2>
<div class="section" id="enabling-2fa-from-the-command-line">
<h3>Enabling 2FA from the command line<a class="headerlink" href="#enabling-2fa-from-the-command-line" title="永久链接至标题">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>Settings you configure on the command line will also apply to your profile settings on the npm website.</p>
</div>
<ol class="arabic simple">
<li><p>On the command line, type the npm profile command along with the option for the 2FA mode you want to enable:</p></li>
</ol>
<blockquote>
<div><ul>
<li><p>To enable 2FA for authorization and writes, type:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm profile enable-2fa auth-and-writes
</pre></div>
</div>
</li>
<li><p>To enable 2FA for authorization only, type:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm profile enable-2fa auth-only
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>To add npm to your authenticator application, using the device with the app, you can either:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>scan the QR code displayed on the command line.</p></li>
<li><p>type the number displayed below the QR code.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>When prompted to add an OTP code from your authenticator, on the command line, enter a one-time password generated by your authenticator app.</p></li>
</ol>
</div>
<div class="section" id="sending-a-one-time-password-from-the-command-line">
<h3>Sending a one-time password from the command line<a class="headerlink" href="#sending-a-one-time-password-from-the-command-line" title="永久链接至标题">¶</a></h3>
<p>If you have enabled 2FA auth-and-writes, you will need to send the OTP from the command line for certain commands to work. To do this, append –otp=123456 (where 123456 is the code generated by your authenticator) at the end of the command. Here are a few examples:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm publish <span class="o">[</span>&lt;tarball&gt;<span class="p">|</span>&lt;folder&gt;<span class="o">][</span>--tag &lt;tag&gt;<span class="o">]</span> --otp<span class="o">=</span><span class="m">123456</span>
npm owner add &lt;user &gt; --otp<span class="o">=</span><span class="m">123456</span>
npm owner rm &lt;user&gt; --otp<span class="o">=</span><span class="m">123456</span>
npm dist-tags add &lt;pkg&gt;@&lt;version&gt; <span class="o">[</span>&lt;tag&gt;<span class="o">]</span> --otp<span class="o">=</span><span class="m">123456</span>
npm access edit <span class="o">[</span>&lt;package&gt;<span class="o">)</span> --otp<span class="o">=</span><span class="m">123456</span>
npm unpublish <span class="o">[</span>&lt;@scope&gt;/<span class="o">]</span>&lt;pkg&gt;<span class="o">[</span>@&lt;version&gt;<span class="o">]</span> --otp<span class="o">=</span><span class="m">123456</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-2fa-from-the-command-line">
<h3>Removing 2FA from the command line<a class="headerlink" href="#removing-2fa-from-the-command-line" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>On the command line, type the following command:</p></li>
</ol>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm profile disable-2fa
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>When prompted, enter your npm password:</p></li>
</ol>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; npm password:
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>When prompted for a one-time password, enter a password from your authenticator app:</p></li>
</ol>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; Enter one-time password from your authenticator: <span class="m">123456</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="resolving-otp-errors">
<h2>Resolving OTP errors<a class="headerlink" href="#resolving-otp-errors" title="永久链接至标题">¶</a></h2>
<p>If you are entering what seems to be a valid OTP but you see an error, be sure that you are using the correct authenticator account. If you have multiple authenticator accounts, using an OTP from the wrong account will cause an error.</p>
<p>If you see an error when you enter a valid OTP, check that you are using the correct authenticator account.</p>
<p>此外，在禁用后重置2fa时，身份验证器可能会创建具有相同名称的第二个帐户。请参阅身份验证器文档以删除旧帐户。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="recovering-your-2fa-enabled-account.html" title="恢复已启用2FA的帐户"
             >下一页</a> |</li>
        <li class="right" >
          <a href="about-two-factor-authentication.html" title="关于双因素身份验证"
             >上一页</a> |</li>
<li><a href="../index.html">主页</a>&#160;|</li>
<li><a href="../contents.html">文档</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >入门</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2019, BandCap.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.0+/8aaa12d 创建。
    </div>
  </body>
</html>
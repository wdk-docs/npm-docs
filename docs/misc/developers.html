
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>npm-developers &#8212; npm-docs 6.9.1 文档</title>
    <link rel="stylesheet" href="../_static/sphinx13.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>

    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="npm-disputes" href="disputes.html" />
    <link rel="prev" title="npm-config" href="config.html" />
<link rel="canonical" href="http://www.sphinx-doc.org/en/master/misc/developers.html" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet" type="text/css" />
 
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
  
</style>
<script type="text/javascript">
  // intelligent scrolling of the sidebar content
  $(window).scroll(function() {
    var sb = $('.sphinxsidebarwrapper');
    var win = $(window);
    var sbh = sb.height();
    var offset = $('.sphinxsidebar').position()['top'];
    var wintop = win.scrollTop();
    var winbot = wintop + win.innerHeight();
    var curtop = sb.position()['top'];
    var curbot = curtop + sbh;
    // does sidebar fit in window?
    if (sbh < win.innerHeight()) {
      // yes: easy case -- always keep at the top
      sb.css('top', $u.min([$u.max([0, wintop - offset - 10]), $(document).height() - sbh - 200]));
    } else {
      // no: only scroll if top/bottom edge of sidebar is at
      // top/bottom edge of window
      if (curtop > wintop && curbot > winbot) {
        sb.css('top', $u.max([wintop - offset - 10, 0]));
      } else if (curtop < wintop && curbot < winbot) {
        sb.css('top', $u.min([winbot - sbh - offset - 20, $(document).height() - sbh - 200]));
      }
    }
  });
</script> 
  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../index.html">主页</a></li>
    <li><a href="../about-npm.html">关于</a></li>
    <li><a href="../getting-started/index.html">入门</a></li>
    <li><a href="../packages-and-modules/index.html">包和模块</a></li>
    <li><a href="../cli/index.html">指令</a></li>
    <li><a href="../integrations/index.html">集成</a></li>
    <li><a href="../orgs/index.html">组织</a></li>
    <li><a href="../enterprise/index.html">企业版</a></li>
  </ul>
  <div>
    <a href="../index.html">
      <!-- <img src="../_static/wxaheader.png" alt="wxa" /> -->
      <svg viewBox="0 0 780 250">
        <path
          fill="#231F20"
          d="M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z M480,0v200h100V50h50v150h50V50h50v150h50V0H480z M0,200h100V50h50v150h50V0H0V200z"
        ></path>
      </svg>
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="disputes.html" title="npm-disputes"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="config.html" title="npm-config"
             accesskey="P">上一页</a> |</li>
<li><a href="../index.html">主页</a>&#160;|</li>
<li><a href="../contents.html">文档</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="contents.html" accesskey="U">misc</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">npm-developers</a><ul>
<li><a class="reference internal" href="#see-also">SEE ALSO</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="config.html"
                        title="上一章">npm-config</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="disputes.html"
                        title="下一章">npm-disputes</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/misc/developers.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="npm-developers">
<span id="developers"></span><h1>npm-developers<a class="headerlink" href="#npm-developers" title="永久链接至标题">¶</a></h1>
<p>Developer Guide
DESCRIPTION
So, you’ve decided to use npm to develop (and maybe publish/deploy) your project.</p>
<p>Fantastic!</p>
<p>There are a few things that you need to do above the simple steps that your users will do to install your program.</p>
<p>About These Documents
These are man pages. If you install npm, you should be able to then do man npm-thing to get the documentation on a particular topic, or npm help thing to see the same information.</p>
<p>What is a package
A package is:</p>
<ol class="loweralpha simple">
<li><p>a folder containing a program described by a package.json file</p></li>
<li><p>a gzipped tarball containing (a)</p></li>
<li><p>a url that resolves to (b)</p></li>
<li><p>a &lt;name&gt;&#64;&lt;version&gt; that is published on the registry with (c)</p></li>
<li><p>a &lt;name&gt;&#64;&lt;tag&gt; that points to (d)</p></li>
<li><p>a &lt;name&gt; that has a “latest” tag satisfying (e)</p></li>
</ol>
<p>g) a git url that, when cloned, results in (a).
Even if you never publish your package, you can still get a lot of benefits of using npm if you just want to write a node program (a), and perhaps if you also want to be able to easily install it elsewhere after packing it up into a tarball (b).</p>
<p>Git urls can be of the form:</p>
<p>git://github.com/user/project.git#commit-ish
git+ssh://user&#64;hostname:project.git#commit-ish
git+http://user&#64;hostname/project/blah.git#commit-ish
git+https://user&#64;hostname/project/blah.git#commit-ish
The commit-ish can be any tag, sha, or branch which can be supplied as an argument to git checkout. The default is master.</p>
<p>The package.json File
You need to have a package.json file in the root of your project to do much of anything with npm. That is basically the whole interface.</p>
<p>See package.json for details about what goes in that file. At the very least, you need:</p>
<p>name: This should be a string that identifies your project. Please do not use the name to specify that it runs on node, or is in JavaScript. You can use the “engines” field to explicitly state the versions of node (or whatever else) that your program requires, and it’s pretty well assumed that it’s JavaScript.</p>
<p>It does not necessarily need to match your github repository name.</p>
<p>So, node-foo and bar-js are bad names. foo or bar are better.</p>
<p>version: A semver-compatible version.</p>
<p>engines: Specify the versions of node (or whatever else) that your program runs on. The node API changes a lot, and there may be bugs or new functionality that you depend on. Be explicit.</p>
<p>author: Take some credit.</p>
<p>scripts: If you have a special compilation or installation script, then you should put it in the scripts object. You should definitely have at least a basic smoke-test command as the “scripts.test” field. See npm-scripts.</p>
<p>main: If you have a single module that serves as the entry point to your program (like what the “foo” package gives you at require(“foo”)), then you need to specify that in the “main” field.</p>
<p>directories: This is an object mapping names to folders. The best ones to include are “lib” and “doc”, but if you use “man” to specify a folder full of man pages, they’ll get installed just like these ones.</p>
<p>You can use npm init in the root of your package in order to get you started with a pretty basic package.json file. See npm-init for more info.</p>
<p>Keeping files out of your package
Use a .npmignore file to keep stuff out of your package. If there’s no .npmignore file, but there is a .gitignore file, then npm will ignore the stuff matched by the .gitignore file. If you want to include something that is excluded by your .gitignore file, you can create an empty .npmignore file to override it. Like git, npm looks for .npmignore and .gitignore files in all subdirectories of your package, not only the root directory.</p>
<p>.npmignore files follow the same pattern rules as .gitignore files:</p>
<p>Blank lines or lines starting with # are ignored.
Standard glob patterns work.
You can end patterns with a forward slash / to specify a directory.
You can negate a pattern by starting it with an exclamation point !.
By default, the following paths and files are ignored, so there’s no need to add them to .npmignore explicitly:</p>
<p>.*.swp
._*
.DS_Store
.git
.hg
.npmrc
.lock-wscript
.svn
.wafpickle-*
config.gypi
CVS
npm-debug.log
Additionally, everything in node_modules is ignored, except for bundled dependencies. npm automatically handles this for you, so don’t bother adding node_modules to .npmignore.</p>
<p>The following paths and files are never ignored, so adding them to .npmignore is pointless:</p>
<p>package.json
README (and its variants)
CHANGELOG (and its variants)
LICENSE / LICENCE
If, given the structure of your project, you find .npmignore to be a maintenance headache, you might instead try populating the files property of package.json, which is an array of file or directory names that should be included in your package. Sometimes a whitelist is easier to manage than a blacklist.</p>
<p>Testing whether your .npmignore or files config works
If you want to double check that your package will include only the files you intend it to when published, you can run the npm pack command locally which will generate a tarball in the working directory, the same way it does for publishing.</p>
<p>Link Packages
npm link is designed to install a development package and see the changes in real time without having to keep re-installing it. (You do need to either re-link or npm rebuild -g to update compiled packages, of course.)</p>
<p>More info at npm-link.</p>
<p>Before Publishing: Make Sure Your Package Installs and Works
This is important.</p>
<p>If you can not install it locally, you’ll have problems trying to publish it. Or, worse yet, you’ll be able to publish it, but you’ll be publishing a broken or pointless package. So don’t do that.</p>
<p>In the root of your package, do this:</p>
<p>npm install . -g
That’ll show you that it’s working. If you’d rather just create a symlink package that points to your working directory, then do this:</p>
<p>npm link
Use npm ls -g to see if it’s there.</p>
<p>To test a local install, go into some other folder, and then do:</p>
<p>cd ../some-other-folder
npm install ../my-package
to install it locally into the node_modules folder in that other place.</p>
<p>Then go into the node-repl, and try using require(“my-thing”) to bring in your module’s main module.</p>
<p>Create a User Account
Create a user with the adduser command. It works like this:</p>
<p>npm adduser
and then follow the prompts.</p>
<p>This is documented better in npm-adduser.</p>
<p>Publish your package
This part’s easy. In the root of your folder, do this:</p>
<p>npm publish
You can give publish a url to a tarball, or a filename of a tarball, or a path to a folder.</p>
<p>Note that pretty much everything in that folder will be exposed by default. So, if you have secret stuff in there, use a .npmignore file to list out the globs to ignore, or publish from a fresh checkout.</p>
<p>Brag about it
Send emails, write blogs, blab in IRC.</p>
<p>Tell the world how easy it is to install your program!</p>
<div class="section" id="see-also">
<h2>SEE ALSO<a class="headerlink" href="#see-also" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p><code class="xref std std-option docutils literal notranslate"><span class="pre">npm</span></code></p></li>
<li><p><a class="reference internal" href="../cli/init.html#cmdoption-npm-arg-init"><code class="xref std std-option docutils literal notranslate"><span class="pre">npm</span> <span class="pre">init</span></code></a></p></li>
<li><p><a class="reference internal" href="../files/package.json.html#package-json"><span class="std std-ref">npm-package.json</span></a></p></li>
<li><p><code class="xref std std-option docutils literal notranslate"><span class="pre">npm</span> <span class="pre">scripts</span></code></p></li>
<li><p><a class="reference internal" href="../cli/publish.html#cmdoption-npm-arg-publish"><code class="xref std std-option docutils literal notranslate"><span class="pre">npm</span> <span class="pre">publish</span></code></a></p></li>
<li><p><a class="reference internal" href="../cli/adduser.html#cmdoption-npm-arg-adduser"><code class="xref std std-option docutils literal notranslate"><span class="pre">npm</span> <span class="pre">adduser</span></code></a></p></li>
<li><p><code class="xref std std-option docutils literal notranslate"><span class="pre">npm</span> <span class="pre">registry</span></code></p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="disputes.html" title="npm-disputes"
             >下一页</a> |</li>
        <li class="right" >
          <a href="config.html" title="npm-config"
             >上一页</a> |</li>
<li><a href="../index.html">主页</a>&#160;|</li>
<li><a href="../contents.html">文档</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="contents.html" >misc</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2019, BandCap.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.0+/8aaa12d 创建。
    </div>
  </body>
</html>